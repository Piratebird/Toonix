<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Toonix{% endblock %}</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
  <!-- Header -->
  <header class="fixed-top bg-dark text-white">
    <nav class="container p-3">
      <div class="row align-items-center">

        <!-- Logo -->
        <div class="col-auto">
          <img src="/static/images/1x/32h/ToonixFull.png" alt="Logo">
        </div>

        <!-- Links -->
        <div class="col">
          <a href="/" class="text-white mr-3">Home</a>
          <a href="/about" class="text-white">About</a>
        </div>

        <!-- Account button -->
        <div class="col-auto">
          <button id="open-account" class="btn btn-primary btn-lg pop">
            Account
          </button>
        </div>

      </div>
    </nav>
  </header>

  <!-- Content block -->

  {% block content %}{% endblock %}

  <!-- Overlay for dim background-->
  <div id="popup-overlay"></div>

  <!-- Account Menu -->
  <div id="account-popup" class="popup-card">
    <div class="card" data-tilt>
      <div class="card-body text-center">

        {% if session.get("user") %}
        <h3>Hi {{ session["user"]["name"] }}!</h3>
        <p class="text-muted">{{ session["user"]["email"] }}</p>

        <button class="btn btn-secondary btn-block mt-3">
          Reset Password
        </button>

        <button class="btn btn-danger btn-block mt-2">
          Delete Account
        </button>

        <form action="/logout" method="post" class="mt-3">
          <button class="btn btn-dark btn-block">Log out</button>
        </form>

        {% else %}
        <h3>Youâ€™re not logged in</h3>
        <button id="open-login" class="btn btn-primary mt-3">
          Login
        </button>
        {% endif %}

      </div>
    </div>
  </div>

  <!-- BOOTSTRAP SIGNUP POPUP MAJIGY-->
  <div id="signup-popup" class="popup-card" data-tilt>
    <div class="card" data-tilt>
      <div class="card-body">
        <h3>Signup</h3>
        <form action="/signup" method="post">
          <input type="text" name="name" placeholder="Name" class="form-control mb-2">
          <input type="email" name="email" placeholder="Email" class="form-control mb-2">
          <input type="password" name="password" placeholder="Password" class="form-control mb-2">
          <button type="submit" class="btn btn-primary">Signup</button>
        </form>
        <p class="mt-2">Already have an account? <a href="#" id="switch-to-login">Login</a></p>
      </div>
    </div>
  </div>



  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.2/vanilla-tilt.min.js"></script>

  <!--Card Functions-->
  <script>


    $(document).ready(function () {

      // Vanilla Tilt init
      VanillaTilt.init(document.querySelectorAll(".popup-card .card"), {
        max: 15,
        speed: 400,
        glare: false,
      });

      // Open account menu jquery function
      $("#open-account").click(function (e) {
        e.preventDefault();
        $("#popup-overlay").fadeIn(150);
        $("#account-popup").fadeIn(250);
      });

      // Switch to Signup
      $(document).on("click", "#switch-to-signup", function (e) {
        e.preventDefault();
        $("#login-popup").hide();
        $("#signup-popup").fadeIn(250);
      });

      // Switch to Login
      $(document).on("click", "#switch-to-login", function (e) {
        e.preventDefault();
        $("#signup-popup").hide();
        $("#login-popup").fadeIn(250);
      });

      // Close popups when clicking overlay
      $("#popup-overlay").click(function () {
        $(".popup-card").fadeOut(150);
        $("#popup-overlay").fadeOut(150);
      });
    });
  </script>
</body>

</html>