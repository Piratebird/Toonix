{% extends 'base.html' %} {% block title %}{{ manga['attributes']['title']['en']
if manga else 'Manga' }} | Toonix{% endblock %} {% block content %}
<div class="container pt-5 mt-5">
  {% if not manga %}
  <p>Manga not found.</p>
  {% else %}
  <h2>{{ manga['attributes']['title'].get('en', 'No Title') }}</h2>

  {% if cover %}
  <img src="{{ cover }}" class="img-fluid mb-4" style="max-width: 300px" />
  {% endif %} {# --- Metadata Section --- #}
  <div class="mb-4">
    {% if manga['attributes'].get('description') %}
    <h5>Description</h5>
    <p>{{ manga['attributes']['description'].get('en', '') }}</p>
    {% endif %} {% if manga['attributes'].get('tags') %}
    <h5>Genres</h5>
    <ul class="list-inline">
      {% for tag in manga['attributes']['tags'] %} {% if
      tag['attributes'].get('name') and tag['attributes']['name'].get('en') %}
      <li class="list-inline-item badge badge-primary p-2 mr-1">
        {{ tag['attributes']['name']['en'] }}
      </li>
      {% endif %} {% endfor %}
    </ul>
    {% endif %} {% if manga['attributes'].get('status') %}
    <p>
      <strong>Status:</strong> {{ manga['attributes']['status'] | capitalize }}
    </p>
    {% endif %} {% if manga['attributes'].get('year') %}
    <p><strong>Year:</strong> {{ manga['attributes']['year'] }}</p>
    {% endif %}
  </div>

  <h4>Chapters</h4>
  <ul class="list-group mb-5">
    {% for ch in chapters %}
    <li class="list-group-item">
      Chapter {{ ch['attributes'].get('chapter', '?') }} -
      <a href="{{ url_for('read_chapter', chapter_id=ch['id']) }}">Read</a>
    </li>
    {% endfor %} {% if not chapters %}
    <li class="list-group-item">No chapters available.</li>
    {% endif %}
  </ul>
  {% endif %}
</div>
{% endblock %}
